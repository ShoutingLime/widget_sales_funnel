let funnelSalesData=[{create_dt:"2019-07-02T00:00:00+03:00",param_id:116,partner_id:2224,value:172e5},{create_dt:"2019-07-02T00:00:00+03:00",param_id:117,partner_id:2224,value:32e5},{create_dt:"2019-07-02T00:00:00+03:00",param_id:118,partner_id:2224,value:3e5},{create_dt:"2019-07-02T00:00:00+03:00",param_id:119,partner_id:2224,value:12e5}],dataset=[funnelSalesData[0].value,25e4,funnelSalesData[1].value,25e4,funnelSalesData[2].value,25e4,funnelSalesData[3].value,25e4],width=320,color=["#61D267","transparent","#FA3264","transparent","#627884","transparent","#E2E9E9","transparent"],pie=d3.pie().sort(null),arc=d3.arc().innerRadius(width/2-3).outerRadius(width/2-30),svg=d3.select("#graphic-sales-funnel").append("svg").attr("width",width).attr("height",width).append("g").attr("transform","translate("+width/2+","+width/2+")"),path=svg.selectAll("path").data(pie(dataset)).enter().append("path").attr("fill",function(e,t){return color[t]}).attr("d",arc).attr("stroke",function(e,t){return color[t]}).attr("stroke-width",5).attr("stroke-linecap","square").attr("stroke-linejoin","round"),summary=funnelSalesData[0].value+funnelSalesData[1].value+funnelSalesData[2].value+funnelSalesData[3].value,widthRedeemed=funnelSalesData[0].value/summary*100,widthRevoked=funnelSalesData[1].value/summary*100,widthReturned=funnelSalesData[2].value/summary*100,widthProcessing=funnelSalesData[3].value/summary*100;document.querySelector(".ppa-widget-sales-funnel__legend-chart--redeemed").style.width=widthRedeemed+"%",document.querySelector(".ppa-widget-sales-funnel__legend-chart--revoked").style.width=widthRevoked+"%",document.querySelector(".ppa-widget-sales-funnel__legend-chart--returned").style.width=widthReturned+"%",document.querySelector(".ppa-widget-sales-funnel__legend-chart--processing").style.width=widthProcessing+"%";let salesFunnelMenuBurger=document.querySelector(".ppa-widget-sales-funnel__menu");document.querySelector("body").addEventListener("click",function(){document.querySelector(".ppa-widget-sales-funnel__menu-popup").classList.remove("visible-flex")}),salesFunnelMenuBurger.addEventListener("click",function(e){e.stopPropagation(),document.querySelector(".ppa-widget-sales-funnel__menu-popup").classList.toggle("visible-flex")});let donutSegment1=document.querySelector("#graphic-sales-funnel > svg > g path:nth-child(1)"),donutSegment2=document.querySelector("#graphic-sales-funnel > svg > g path:nth-child(3)"),donutSegment3=document.querySelector("#graphic-sales-funnel > svg > g path:nth-child(5)"),donutSegment4=document.querySelector("#graphic-sales-funnel > svg > g path:nth-child(7)"),segment1Tooltip=document.querySelector(".segment1Tooltip"),segment2Tooltip=document.querySelector(".segment2Tooltip"),segment3Tooltip=document.querySelector(".segment3Tooltip"),segment4Tooltip=document.querySelector(".segment4Tooltip");donutSegment1.addEventListener("mouseover",function(e){segment1Tooltip.style.display="block",segment1Tooltip.style.top=e.pageY-62+"px",segment1Tooltip.style.left=e.pageX-70+"px",donutSegment2.style.transition="opacity 0.5s ease",donutSegment2.style.opacity="0.2",donutSegment3.style.transition="opacity 0.5s ease",donutSegment3.style.opacity="0.2",donutSegment4.style.transition="opacity 0.5s ease",donutSegment4.style.opacity="0.2"}),donutSegment1.addEventListener("mousemove",function(e){segment1Tooltip.style.top=e.pageY-62+"px",segment1Tooltip.style.left=e.pageX-70+"px"}),donutSegment1.addEventListener("mouseout",function(e){segment1Tooltip.style.display="none",donutSegment2.style.opacity="1",donutSegment3.style.opacity="1",donutSegment4.style.opacity="1"}),donutSegment2.addEventListener("mouseover",function(e){segment2Tooltip.style.display="block",segment2Tooltip.style.top=e.pageY-62+"px",segment2Tooltip.style.left=e.pageX-70+"px",donutSegment3.style.transition="opacity 0.5s ease",donutSegment3.style.opacity="0.2",donutSegment4.style.transition="opacity 0.5s ease",donutSegment4.style.opacity="0.2",donutSegment1.style.transition="opacity 0.5s ease",donutSegment1.style.opacity="0.2"}),donutSegment2.addEventListener("mousemove",function(e){segment2Tooltip.style.top=e.pageY-62+"px",segment2Tooltip.style.left=e.pageX-70+"px"}),donutSegment2.addEventListener("mouseout",function(e){segment2Tooltip.style.display="none",donutSegment3.style.opacity="1",donutSegment4.style.opacity="1",donutSegment1.style.opacity="1"}),donutSegment3.addEventListener("mouseover",function(e){segment3Tooltip.style.display="block",segment3Tooltip.style.top=e.pageY-62+"px",segment3Tooltip.style.left=e.pageX-70+"px",donutSegment4.style.transition="opacity 0.5s ease",donutSegment4.style.opacity="0.2",donutSegment1.style.transition="opacity 0.5s ease",donutSegment1.style.opacity="0.2",donutSegment2.style.transition="opacity 0.5s ease",donutSegment2.style.opacity="0.2"}),donutSegment3.addEventListener("mousemove",function(e){segment3Tooltip.style.top=e.pageY-62+"px",segment3Tooltip.style.left=e.pageX-70+"px"}),donutSegment3.addEventListener("mouseout",function(e){segment3Tooltip.style.display="none",donutSegment4.style.opacity="1",donutSegment1.style.opacity="1",donutSegment2.style.opacity="1"}),donutSegment4.addEventListener("mouseover",function(e){segment4Tooltip.style.display="block",segment4Tooltip.style.top=e.pageY-62+"px",segment4Tooltip.style.left=e.pageX-70+"px",donutSegment1.style.transition="opacity 0.5s ease",donutSegment1.style.opacity="0.2",donutSegment2.style.transition="opacity 0.5s ease",donutSegment2.style.opacity="0.2",donutSegment3.style.transition="opacity 0.5s ease",donutSegment3.style.opacity="0.2"}),donutSegment4.addEventListener("mousemove",function(e){segment4Tooltip.style.top=e.pageY-62+"px",segment4Tooltip.style.left=e.pageX-70+"px"}),donutSegment4.addEventListener("mouseout",function(e){segment4Tooltip.style.display="none",donutSegment1.style.opacity="1",donutSegment2.style.opacity="1",donutSegment3.style.opacity="1"});